

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Simple Injector Pipeline &mdash; Simple Injector 2 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Simple Injector 2 documentation" href="index.html"/>
        <link rel="next" title="Design Principles" href="principles.html"/>
        <link rel="prev" title="Extensibility Points" href="extensibility.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> Simple Injector</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#new-diagnostic-services-in-simple-injector-2">New Diagnostic Services in Simple Injector 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#getting-started">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#a-quick-example">A Quick Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#more-information">More information</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="using.html">Using Simple Injector</a><ul>
<li class="toctree-l2"><a class="reference internal" href="using.html#resolving-instances">Resolving instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="using.html#configuring-simple-injector">Configuring Simple Injector</a></li>
<li class="toctree-l2"><a class="reference internal" href="using.html#verifying-the-container-s-configuration">Verifying the container&#8217;s configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="using.html#automatic-constructor-injection-auto-wiring">Automatic constructor injection / auto-wiring</a></li>
<li class="toctree-l2"><a class="reference internal" href="using.html#more-information">More information</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="lifetimes.html">Object Lifetime Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="lifetimes.html#transient">Transient</a></li>
<li class="toctree-l2"><a class="reference internal" href="lifetimes.html#singleton">Singleton</a></li>
<li class="toctree-l2"><a class="reference internal" href="lifetimes.html#scoped">Scoped</a></li>
<li class="toctree-l2"><a class="reference internal" href="lifetimes.html#per-web-request">Per Web Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="lifetimes.html#per-web-api-request">Per Web API Request</a></li>
<li class="toctree-l2"><a class="reference internal" href="lifetimes.html#web-api-request-lifestyle-vs-web-request-lifestyle">Web API Request lifestyle vs. Web Request lifestyle</a></li>
<li class="toctree-l2"><a class="reference internal" href="lifetimes.html#per-wcf-operation">Per WCF Operation</a></li>
<li class="toctree-l2"><a class="reference internal" href="lifetimes.html#per-lifetime-scope">Per Lifetime Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="lifetimes.html#per-execution-context-scope">Per Execution Context Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="lifetimes.html#per-graph">Per Graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="lifetimes.html#per-thread">Per Thread</a></li>
<li class="toctree-l2"><a class="reference internal" href="lifetimes.html#per-http-session">Per HTTP Session</a></li>
<li class="toctree-l2"><a class="reference internal" href="lifetimes.html#hybrid">Hybrid</a></li>
<li class="toctree-l2"><a class="reference internal" href="lifetimes.html#developing-a-custom-lifestyle">Developing a Custom Lifestyle</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="diagnostics.html">Diagnostic Services</a><ul>
<li class="toctree-l2"><a class="reference internal" href="diagnostics.html#how-to-view-diagnostic-results">How to view diagnostic results</a></li>
<li class="toctree-l2"><a class="reference internal" href="diagnostics.html#limitations">Limitations</a></li>
<li class="toctree-l2"><a class="reference internal" href="diagnostics.html#supported-warnings">Supported Warnings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="howto.html">How To</a><ul>
<li class="toctree-l2"><a class="reference internal" href="howto.html#register-factory-delegates">Register factory delegates</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto.html#resolve-instances-by-key">Resolve instances by key</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto.html#resolve-arrays-and-lists">Resolve arrays and lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto.html#register-multiple-interfaces-with-the-same-implementation">Register multiple interfaces with the same implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto.html#override-existing-registrations">Override existing registrations</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto.html#verify-the-containers-configuration">Verify the container’s configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto.html#work-with-dependency-injection-in-multi-threaded-applications">Work with dependency injection in multi-threaded applications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced Scenarios</a><ul>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#generics">Generics</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#batch-automatic-registration">Batch / Automatic registration</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#registration-of-open-generic-types">Registration of open generic types</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#unregistered-type-resolution">Unregistered type resolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#context-based-injection">Context based injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#decorators">Decorators</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#interception">Interception</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#property-injection">Property injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#covariance-and-contravariance">Covariance and Contravariance</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced.html#registering-plugins-dynamically">Registering plugins dynamically</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="integration.html">Integration Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="mvcintegration.html">    ASP.NET MVC</a></li>
<li class="toctree-l2"><a class="reference internal" href="webapiintegration.html">    ASP.NET Web API</a></li>
<li class="toctree-l2"><a class="reference internal" href="webformsintegration.html">    ASP.NET Web Forms</a></li>
<li class="toctree-l2"><a class="reference internal" href="windowsformsintegration.html">    Windows Forms</a></li>
<li class="toctree-l2"><a class="reference internal" href="wcfintegration.html">    WCF</a></li>
<li class="toctree-l2"><a class="reference internal" href="wpfintegration.html">    WPF and Silverlight</a></li>
<li class="toctree-l2"><a class="reference internal" href="integration.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="extensibility.html">Extensibility Points</a><ul>
<li class="toctree-l2"><a class="reference internal" href="extensibility.html#overriding-constructor-resolution-behavior">Overriding Constructor Resolution Behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="extensibility.html#property-injection">Property Injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="extensibility.html#overriding-parameter-injection-behavior">Overriding Parameter Injection Behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="extensibility.html#resolving-unregistered-types">Resolving Unregistered Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="extensibility.html#overriding-lifestyle-selection-behavior">Overriding Lifestyle Selection Behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="extensibility.html#intercepting-the-creation-of-types">Intercepting the Creation of Types</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Simple Injector Pipeline</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#registration-pipeline">Registration Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="#resolve-pipeline">Resolve Pipeline</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="principles.html">Design Principles</a><ul>
<li class="toctree-l2"><a class="reference internal" href="principles.html#make-simple-use-cases-easy-make-complex-use-cases-possible">Make simple use cases easy, make complex use cases possible</a></li>
<li class="toctree-l2"><a class="reference internal" href="principles.html#push-developers-into-best-practices">Push developers into best practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="principles.html#fast-by-default">Fast by default</a></li>
<li class="toctree-l2"><a class="reference internal" href="principles.html#don-t-force-vendor-lock-in">Don&#8217;t force vendor lock-in</a></li>
<li class="toctree-l2"><a class="reference internal" href="principles.html#never-fail-silently">Never fail silently</a></li>
<li class="toctree-l2"><a class="reference internal" href="principles.html#features-should-be-intuitive">Features should be intuitive</a></li>
<li class="toctree-l2"><a class="reference internal" href="principles.html#communicate-errors-clearly-and-describe-how-to-solve-them">Communicate errors clearly and describe how to solve them</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="decisions.html">Design Decisions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="decisions.html#the-container-is-locked-after-the-first-call-to-resolve">The container is locked after the first call to resolve</a></li>
<li class="toctree-l2"><a class="reference internal" href="decisions.html#the-api-clearly-differentiates-the-registration-of-collections">The API clearly differentiates the registration of collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="decisions.html#no-support-for-xml-based-configuration">No support for XML based configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="decisions.html#never-force-users-to-release-what-they-resolve">Never force users to release what they resolve</a></li>
<li class="toctree-l2"><a class="reference internal" href="decisions.html#dont-allow-resolving-scoped-instances-outside-an-active-scope">Don’t allow resolving scoped instances outside an active scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="decisions.html#no-out-of-the-box-support-for-property-injection">No out-of-the-box support for property injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="decisions.html#no-out-of-the-box-support-for-interception">No out-of-the-box support for interception</a></li>
<li class="toctree-l2"><a class="reference internal" href="decisions.html#limited-batch-registration-api">Limited batch-registration API</a></li>
<li class="toctree-l2"><a class="reference internal" href="decisions.html#no-per-thread-lifestyle">No per-thread lifestyle</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="legal.html">Legal stuff</a><ul>
<li class="toctree-l2"><a class="reference internal" href="legal.html#simple-injector-license">Simple Injector License</a></li>
<li class="toctree-l2"><a class="reference internal" href="legal.html#contributions">Contributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="legal.html#simple-injector-trademark-policy">Simple Injector Trademark Policy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">How to Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix</a><ul>
<li class="toctree-l2"><a class="reference internal" href="RuntimeDecorators.html">Runtime Decorators</a></li>
<li class="toctree-l2"><a class="reference internal" href="InterceptionExtensions.html">    Interception Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="CollectionRegistrationExtensions.html">    Collection Registration Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="ContextDependentExtensions.html">    Context Dependent Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="t4mvc.html">    T4MVC</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Simple Injector</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Simple Injector Pipeline</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/pipeline.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="simple-injector-pipeline">
<h1>Simple Injector Pipeline<a class="headerlink" href="#simple-injector-pipeline" title="Permalink to this headline">¶</a></h1>
<p>The pipeline is a series of steps that the Simple Injector container follows when registering and resolving each type. Simple Injector supports customizing certain steps in the pipeline to affect the default behavior. This document describes these steps and how the pipeline can be customized.</p>
<div class="section" id="registration-pipeline">
<span id="id1"></span><h2>Registration Pipeline<a class="headerlink" href="#registration-pipeline" title="Permalink to this headline">¶</a></h2>
<p>The registration pipeline is the set of steps Simple Injector takes when making a registration in the container. This pipeline mainly consists of a set of validations that is performed. The process is rather straightforward and looks like this:</p>
<img alt="Register Type Pipeline Diagram" src="_images/pipeline1.png" />
<div class="note container">
<strong>Note</strong>: The order in which those validations are performed is undocumented and might change from version to version.</div>
<p>Steps:</p>
<ul class="simple">
<li><em>Container locked?</em>: When the first type is resolved from the container, the container is locked for further changes. When a call to one of the registration methods is made after that, the container will throw an exception. The container can&#8217;t be unlocked. This behavior is fixed and can&#8217;t be changed. For a thorough explanation about this design, please read the <a class="reference internal" href="decisions.html#container-is-locked"><em>design principles documentation</em></a>. That documentation section also explains how to add new registrations after this point.</li>
<li><em>Is ambiguous type?</em>: When a type is registered that is considered to be ambiguous, the container will throw an exception. Types such as <strong>System.Type</strong> and <strong>System.String</strong> are considered ambiguous, since they have value type semantics and its unlikely that the configuration only contains a single definition of such type. For instance, when components take a string parameter in their constructor, it&#8217;s very unlikely that all components need that same value. Instead some components need a connection string, others a path to the file system, etc. To prevent this ambiguity in the configuration, Simple Injector blocks these registrations. This behavior is fixed and can&#8217;t be changed.</li>
<li><em>Service type registered?</em>: When a service type has already been registered, the container throws an exception. This prevents any accidental misconfigurations. This behavior can be overridden. See the <a class="reference internal" href="howto.html#override-existing-registrations"><em>How to override existing registrations</em></a> for more information.</li>
<li><em>Is constructable type?</em>: When the registration is supplied with an implementation type that the container must create and auto-wire (using <em>Register&lt;TService, TImplementation&gt;()</em> for instance), the container checks if the implementation type is constructable. A type is considered to be constructable when it is a concrete type and has a single public constructor. An exception is thrown when these conditions are not met. This behavior can be overridden by implementing a custom  <em>IConstructorResolutionBehavior</em>. Take for instance <a class="reference internal" href="t4mvc.html"><em>this example about T4MVC</em></a>.</li>
<li><em>All ctor params valid?</em>: The constructor that has been selected in the previous step will be analyzed for invalid constructor parameters. Ambiguous types such as System.String and value types such as Int32 and Guid are not allowed. This behavior can be overridden by implementing a custom <em>IConstructorVerificationBehavior</em>. The <em>IConstructorVerificationBehavior</em> will typically have to be overridden in combination with the <em>IConstructorInjectionBehavior</em>, which is used during the <strong>Resolve Pipeline</strong>. Take a look at <a class="reference external" href="http://www.cuttingedge.it/blogs/steven/pivot/entry.php?id=94">this blog post</a> for an elaborate example.</li>
<li><em>Add registration</em>: When all previous validations succeeded, the registration is added to the container. Although the type may be registered successfully, this still doesn&#8217;t mean it can always be resolved. This depends on several other factors such as whether all dependencies can be resolved correctly. These checks cannot be performed during registration, and they are performed during the <strong>Resolve Pipeline</strong>.</li>
</ul>
</div>
<div class="section" id="resolve-pipeline">
<span id="id2"></span><h2>Resolve Pipeline<a class="headerlink" href="#resolve-pipeline" title="Permalink to this headline">¶</a></h2>
<p>The resolve pipeline is the set of steps Simple Injector takes when resolving an instance. Many steps in the pipeline can be replaced (orange in the diagram below) to change the default behavior of the container. The following diagram visualizes this pipeline:</p>
<img alt="Resolve Instance Pipeline Diagram" src="_images/pipeline2.png" />
<div class="note container">
<strong>Note</strong>: The order in which those steps are performed is <em>deterministic</em> and can be safely depended upon.</div>
<p>Steps:</p>
<ul class="simple">
<li><em>Type registered?</em>: If a type is requested that is not yet registered, the container falls back to unregistered type resolution.</li>
<li><em>Delegate cached?</em>: At the end of the pipeline, the compiled delegate is cached during the lifetime of the <strong>Container</strong> instance. Executing the pipeline steps is expensive and caching the delegate improves performance. This does mean though, that once compiled, the way a type is created, cannot be changed.</li>
<li><em>Check for recursive calls</em>: The container checks if a type indirectly depends on itself and throw a descriptive exception in this case. This prevents any hard to debug StackOverflowException that might otherwise occur.</li>
<li><em>Select ctor</em>: The container selects the single public constructor of the concrete type. This behavior can be overridden by implementing a custom  <em>IConstructorResolutionBehavior</em>. Take for instance <a class="reference internal" href="t4mvc.html"><em>this example about T4MVC</em></a>. When the registration is made using a <strong>Func&lt;T&gt;</strong> delegate, this and the following steps are skipped.</li>
<li><em>Build ctor arguments</em>: The container will call back into the container to resolve all constructor arguments. This results in a recursive call into the container with will trigger building a complete object graph. The container will throw an exception when one of the parameters cannot be resolved. This behavior can be overridden by implementing a custom <em>IConstructorInjectionBehavior</em>. The <em>IConstructorInjectionBehavior</em> will typically have to be overridden in combination with the <em>IConstructorVerificationBehavior</em>, which is used during the <strong>Register Pipeline</strong>. Take a look at <a class="reference external" href="http://www.cuttingedge.it/blogs/steven/pivot/entry.php?id=94">this blog post</a> for an elaborate example. The result of this step is an <strong>Expression</strong> that describes the invocation of the constructor with its arguments, i.e. &#8220;new MyService(new DbLogger(), new MyRepository(new DbFactory()))&#8221;.</li>
<li><em>Select properties</em>: The default behavior of the container is to not inject any properties and without any customization this step will be skipped. This behavior can be changed by implementing a custom <em>IPropertySelectionBehavior</em>. This custom behavior can decide how to handle each property (both public and non-public) of the given implementation. <strong>Note that read-only properties (without a setter) and static properties will be queried as well, although they can never be injected</strong>. It is the responsibility of the implementation to decide what to do with those properties. Note that the container will <em>not</em> silently skip any properties. If the custom property selection behavior returns true for a given property, the container throws an exception when the property cannot be injected. For instance, because the dependency can&#8217;t be resolved or when the application&#8217;s sandbox does not permit accessing internal types. When this step resulted in any properties being injected, it results in an <strong>Expression</strong> that describes the invocation of a delegate that injects the properties into the type that was created in the previous step, i.e. <strong>&#8220;injectProperties(new PropertyDependency1(), new PropertyDependency2(), new ServiceToInjectInto(new DbLogger())&#8221;</strong>. The &#8216;injectProperties&#8217; in this case is a compiled delegate that takes in the created instance as last element and returns that same instance. The other arguments passed into this delegate are the properties that must be injected. Note that although this <strong>Expression</strong> calls a delegate, the delegate only sets the type&#8217;s properties based on method arguments. The <strong>Expression</strong> still contains all dependencies of the type (both constructor and property). It is important to note that the structure of this expression might change from version to version, but the fact that the expression holds all dependency information will not (and the service to inject the properties into will always be the last argument, since the framework has to ensure that the type&#8217;s dependencies are created first). By building this structure with all information available, we allow the following step to have complete control over the expression. Note that in case the registration is made using a <strong>Func&lt;T&gt;</strong> delegate, only the properties of the supplied <strong>TService</strong> will be queried and not the properties of the actually returned type (which might be a sub type of <strong>TService</strong>). For more information about changing the default behavior, see the <a class="reference internal" href="extensibility.html#property-injection"><em>Property Injection</em></a> section on the <a class="reference internal" href="advanced.html"><em>Advanced Scenarios</em></a> page.</li>
<li><em>Intercept expression</em> (1): By default the container skips this step. Users can hook a delegate onto the <em>ExpressionBuilding</em> event. This event allows molding and changing the expression built in the previous step. Please take a look at the <a class="reference internal" href="advanced.html#context-based-injection"><em>Context Based Injection</em></a> section in the <a class="reference internal" href="advanced.html"><em>Advanced scenarios</em></a> wiki page for an example of what you can achieve by hooking onto this event. Note that there is a restriction to the changes you can make to the expression. Although the Expression can be changed completely, you have to make sure that any replaced expression returns the same implementation type (or a subtype).</li>
<li><em>Apply initializers</em>: Any applicable <strong>Action</strong> delegates that are registered using <em>RegisterInitializer&lt;T&gt;(Action&lt;T&gt;)</em>, will be applied to the expression at this point. When one or more initializers are applied, it results in the creation of an <strong>Expression</strong> that wraps the original expression and invokes a delegate that calls the <strong>Action</strong> delegates, i.e. <strong>&#8220;applyInitializers(MyService())&#8221;</strong>.</li>
<li><em>Apply lifestyle</em>: Until this point in the pipeline, the expression that has been built describes the creation of a new instance (transient). This step applies caching to this instance. Lifestyles are applied by <em>Lifestyle</em> implementations. They use the expression that was built up using the previous steps and they are allowed to compile this expression to a delegate, before applying the caching. This means that the expressiveness about all the type&#8217;s dependencies can be embedded in the compiled delegate and is unavailable for analysis and interception when the next step is applied.</li>
<li><em>Intercept expression</em> (2): The container&#8217;s <em>ExpressionBuilt</em> event gets triggered after the lifestyle has been applied to an expression. The container&#8217;s <a class="reference internal" href="advanced.html#decorators"><em>RegisterDecorator</em></a> extension methods internally make use of this event to decorate any type while preserving the lifestyle of that type. Multiple <em>ExpressionBuilt</em> events could handle the same type and they are all applied in the order in which they are registered.</li>
<li><em>Compile expression</em>: In this step, the expression that is the result of the previous step is compiled to a <strong>Func&lt;object&gt;</strong> delegate. This step cannot be customized.</li>
<li><em>Cache delegate</em>: The compiled delegate is stored for reuse. This step cannot be customized.</li>
<li><em>Call delegate</em>: The cached delegate is called to resolve an instance of the registered type. This step cannot be customized.</li>
<li><em>Call &#8216;Resolve Unregistered Type&#8217; event</em>: When a type is requested that is not registered, the container will call the <a class="reference internal" href="advanced.html#unregistered-type-resolution"><em>ResolveUnregisteredType</em></a> event. Users can hook onto this event to make a last-minute registration in the container, even after the container has been locked down. The <a class="reference internal" href="advanced.html#registration-of-open-generic-types"><em>RegisterOpenGeneric</em></a> extension methods make use of this event internally to allow mapping any given open generic abstraction to an open generic implementation. Another example is the <a class="reference internal" href="howto.html#resolve-arrays-and-lists"><em>Resolving Arrays and Lists</em></a> section in the <a class="reference internal" href="howto.html"><em>How to</em></a> documentation page.</li>
<li><em>Resolved?</em>: When there was a registered <em>ResolveUnregisteredType</em> event that responded to the unregistered type, it is assumed that it has a lifestyle applied. It therefore makes a jump through the pipeline and continues right after the <strong>Apply lifestyle</strong> step. This allows any post lifestyle interception (such as decorators) to still be applied to types that are resolved using unregistered type resolution.</li>
<li><em>Is constructable type?</em>: When no <em>ResolveUnregisteredType</em> make the registration of the given type, the container will check if the type is constructable. This is done by querying the <em>IConstructorResolutionBehavior</em> and <em>IConstructorVerificationBehavior</em> implementations. By default, this means that the type should have a single public constructor and that the constructor arguments should not be ambiguous types (such as String or a value type). This behavior can be customized. If a type is constructable according to these rules ,the type is created by running it through the pipeline starting at <strong>Select ctor</strong> step with the transient lifetime. In other words, concrete types that are not registered explicitly, will get resolved with the transient lifestyle.</li>
<li><em>Type is collection?</em>: When the requested type is an <strong>IEnumerable&lt;T&gt;</strong> (or <strong>IReadOnlyCollection&lt;T&gt;</strong> or <strong>IReadOnlyList&lt;T&gt;</strong> in .NET 4.5), the container will build a empty list that will be used as singleton. This collection will be passed on to the <strong>Intercept expression</strong> step after <strong>Apply lifestyle</strong> to allow this empty list to still be intercepted and decorated. If the type is not an <strong>IEnumerable&lt;T&gt;</strong>, the type can&#8217;t be created by the container and an exception is thrown.</li>
</ul>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="principles.html" class="btn btn-neutral float-right" title="Design Principles"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="extensibility.html" class="btn btn-neutral" title="Extensibility Points"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Simple Injector Contributors.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>